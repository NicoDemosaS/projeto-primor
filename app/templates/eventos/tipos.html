{% extends "base.html" %}

{% block title %}Tipos de Evento - Primor Garçons{% endblock %}

{% block content %}
<div class="p-8">
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
        <div class="flex items-center gap-4">
            <a href="{{ url_for('eventos.index') }}" class="text-gray-400 hover:text-white transition-colors">
                ← Voltar
            </a>
            <h1 class="text-2xl font-semibold text-white">Tipos de Evento</h1>
        </div>
    </div>
    
    <div class="max-w-xl">
        <!-- Form Novo Tipo -->
        <div class="bg-gray-800/50 backdrop-blur-sm border border-white/10 rounded-xl p-6 mb-6">
            <h2 class="text-lg font-semibold text-white mb-4">Adicionar Novo Tipo</h2>
            <form method="POST" action="{{ url_for('eventos.tipo_criar') }}" class="flex items-center gap-4">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="text" name="nome" required placeholder="Ex: Formatura"
                       class="flex-1 rounded-md bg-white/5 px-3 py-2 text-white outline-1 -outline-offset-1 outline-white/10 placeholder:text-gray-500 focus:outline-2 focus:-outline-offset-2 focus:outline-amber-400">
                <button type="submit" 
                        class="rounded-md bg-amber-400 px-4 py-2 text-sm font-semibold text-gray-900 hover:bg-amber-300 transition-colors">
                    Adicionar
                </button>
            </form>
        </div>
        
        <!-- Lista de Tipos -->
        <div class="bg-gray-800/50 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden">
            <div class="p-4 border-b border-white/10">
                <h2 class="text-lg font-semibold text-white">Tipos Cadastrados</h2>
            </div>
            {% if tipos %}
            <div class="divide-y divide-white/5">
                {% for tipo in tipos %}
                <div class="p-4 flex items-center justify-between hover:bg-white/5">
                    <span class="text-white">{{ tipo.nome }}</span>
                    <div class="flex items-center gap-4">
                        <span class="text-sm text-gray-500">{{ tipo.eventos|length }} eventos</span>
                        {% if tipo.eventos|length == 0 %}
                        <form method="POST" action="{{ url_for('eventos.tipo_excluir', id=tipo.id) }}" onsubmit="return confirm('Tem certeza?')">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="text-gray-500 hover:text-red-400 transition-colors" title="Excluir">
                                ✕
                            </button>
                        </form>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="p-8 text-center text-gray-500">
                <p>Nenhum tipo cadastrado ainda.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
